{{with $environment := env "ENVIRONMENT"}}
{{with $secrets := vault (printf "secret/dsde/bond/%s/config.ini" $environment)}}

[fence]
CLIENT_ID={{ $secrets.Data.client_id }}
CLIENT_SECRET={{ $secrets.Data.client_secret }}
OPEN_ID_CONFIG_URL={{if eq $environment "prod"}}https://dcp.bionimbus.org/user/.well-known/openid-configuration{{else}}https://dcp.bionimbus.org/user/.well-known/openid-configuration{{end}}
USER_NAME_PATH_EXPR=/context/user/name
FENCE_BASE_URL={{if eq $environment "prod"}}https://dcp.bionimbus.org{{else}}https://dcp.bionimbus.org{{end}}

[dcf-fence]
CLIENT_ID={{ $secrets.Data.dcf_fence_client_id }}
CLIENT_SECRET={{ $secrets.Data.dcf_fence_client_secret }}
OPEN_ID_CONFIG_URL={{if eq $environment "prod"}}https://nci-crdc.datacommons.io/user/.well-known/openid-configuration{{else if eq $environment "staging"}}https://nci-crdc-staging.datacommons.io/user/.well-known/openid-configuration{{else}}https://qa.dcf.planx-pla.net/user/.well-known/openid-configuration{{end}}
USER_NAME_PATH_EXPR=/context/user/name
FENCE_BASE_URL={{if eq $environment "prod"}}https://nci-crdc.datacommons.io{{else if eq $environment "staging"}}https://nci-crdc-staging.datacommons.io{{else}}https://qa.dcf.planx-pla.net{{end}}

[sam]
BASE_URL=https://sam.dsde-{{$environment}}.broadinstitute.org

{{end}}{{end}}
